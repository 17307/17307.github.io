---
title: 虚拟机通信
date: 2018-08-30 20:04:00
categories: others
tag: linux
---

与虚拟机通信相关

<!-- more -->

## VMware-NAT 模式

### nat模式

由vnet8网卡分配IP，网关，dns，虚拟机也可以设置自己想要的IP，指定的网段

### 虚拟网络拓扑图



!["vmware-nat"](vm-nat.png)



### 原理分析

首先明白vmware软件提供的功能：nat ，网关，dhcp，dns等功能。

把vmare想象成模拟成了nat设备，网关设备，交换机，dhcp设备，dns等多台设备，将真机和虚拟机组网起来，实现相互通信，虚拟机上网的功能。

注意在VMnet8交换机下,主机在虚拟局域网中的ip为`192.168.128.1`,这个地址是vm08网卡的地址,所以如果虚拟机想要`ping`主机,需要`ping 192.168.128.1`

VMware Network Adapter VMnet8的作用 

在nat网络中，会使用到VMnet8交换机，真实主机上的VMware Network Adapter VMnet8连接到VMnet8交换机，来与虚拟机通信。所以VMware Network Adapter VMnet8仅仅是和Vmnet8虚拟机交换机网络通信的（192.168.128.0/24），并不提供路由功能。禁用掉VMware Network Adapter VMnet8网卡，虚拟机仍然能上网，只是真机与虚拟机之间不能通信。 



![](vm-nat2.jpg)



