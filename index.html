<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: 'EJEZINIHYM',
      apiKey: 'bd8c08bd8abb18a323382649a08df5e6',
      indexName: 'hexo',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="o1hy">
<meta property="og:url" content="https://17307.github.io/index.html">
<meta property="og:site_name" content="o1hy">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="o1hy">






  <link rel="canonical" href="https://17307.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>o1hy</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">o1hy</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2019/03/05/flask前后端分离/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/05/flask前后端分离/" class="post-title-link" itemprop="url">flask前后端分离&装饰器</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-05 16:30:30 / Modified: 19:27:37" itemprop="dateCreated datePublished" datetime="2019-03-05T16:30:30+08:00">2019-03-05</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/web/flask/" itemprop="url" rel="index"><span itemprop="name">flask</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/03/05/flask前后端分离/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/05/flask前后端分离/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>简单的介绍下flask前后端分离的流程，以及部分底层代码。还有装饰器的内容。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/03/05/flask前后端分离/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2019/02/28/跨域等问题/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/跨域等问题/" class="post-title-link" itemprop="url">跨域等问题</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 18:42:21" itemprop="dateCreated datePublished" datetime="2019-02-28T18:42:21+08:00">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-01 11:00:32" itemprop="dateModified" datetime="2019-03-01T11:00:32+08:00">2019-03-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/02/28/跨域等问题/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/28/跨域等问题/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>跨域相关的问题</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/02/28/跨域等问题/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2019/02/21/tencent-cos-extension/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/21/tencent-cos-extension/" class="post-title-link" itemprop="url">tencent-cos-extension</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-21 12:00:04" itemprop="dateCreated datePublished" datetime="2019-02-21T12:00:04+08:00">2019-02-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-24 17:38:54" itemprop="dateModified" datetime="2019-02-24T17:38:54+08:00">2019-02-24</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/others/" itemprop="url" rel="index"><span itemprop="name">others</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/others/chrome/" itemprop="url" rel="index"><span itemprop="name">chrome</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/02/21/tencent-cos-extension/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/21/tencent-cos-extension/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>想实现一款插件，对接腾讯图床。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/02/21/tencent-cos-extension/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2019/02/20/Transparency/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/20/Transparency/" class="post-title-link" itemprop="url">HTTPS and Certificate Transparency</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-20 15:53:02 / Modified: 22:01:12" itemprop="dateCreated datePublished" datetime="2019-02-20T15:53:02+08:00">2019-02-20</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/PT/" itemprop="url" rel="index"><span itemprop="name">PT</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/02/20/Transparency/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/20/Transparency/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>HTTPS ， CA , CT的一些内容</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/02/20/Transparency/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2019/02/02/chrome-extension/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/02/chrome-extension/" class="post-title-link" itemprop="url">chrome-extension</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-02 21:50:15" itemprop="dateCreated datePublished" datetime="2019-02-02T21:50:15+08:00">2019-02-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-14 19:33:28" itemprop="dateModified" datetime="2019-02-14T19:33:28+08:00">2019-02-14</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/others/" itemprop="url" rel="index"><span itemprop="name">others</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/others/chrome/" itemprop="url" rel="index"><span itemprop="name">chrome</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/02/02/chrome-extension/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/02/chrome-extension/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>本文将介绍一些chrome插件的基础内容，但是也省略了一些基础的内容。并不面向新手开发者。文中将会对<code>content-js</code>,<code>inject-js</code>,<code>popup</code>,<code>background</code>做一些粗略的介绍，尤其是对它们之间的通信方面。</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/02/02/chrome-extension/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2018/11/12/infrastructures/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/11/12/infrastructures/" class="post-title-link" itemprop="url">Graph-theoretic characterization of cyber-threat infrastructures</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-12 16:30:45" itemprop="dateCreated datePublished" datetime="2018-11-12T16:30:45+08:00">2018-11-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 19:52:17" itemprop="dateModified" datetime="2019-02-02T19:52:17+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/papers/" itemprop="url" rel="index"><span itemprop="name">papers</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2018/11/12/infrastructures/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/12/infrastructures/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-基本信息"><a href="#0x00-基本信息" class="headerlink" title="0x00 基本信息"></a>0x00 基本信息</h2><p><strong>作者:</strong> o1hy@DAS<br><strong>原文作者：</strong> Amine Boukhtouta, Djedjiga Mouheb , Mourad Debbabi ,Omar Alfandi, Farkhund Iqbal, May El Barachi<br><strong>原文标题：</strong> Graph-theoretic characterization of cyber-threat infrastructures<br><strong>原文会议或期刊：</strong> Digital Investigation(网络中与犯罪和安全有关的主题)  </p>
<h2 id="论文主要内容：-与网络威胁相关的基础设施的分析"><a href="#论文主要内容：-与网络威胁相关的基础设施的分析" class="headerlink" title="论文主要内容：  与网络威胁相关的基础设施的分析"></a><strong>论文主要内容：</strong>  与网络威胁相关的基础设施的分析</h2><h2 id="0x01-文章摘要"><a href="#0x01-文章摘要" class="headerlink" title="0x01 文章摘要"></a>0x01 文章摘要</h2><p>本文对网络威胁及其基础设施进行了研究。</p>
<ul>
<li><p>检测和分析网络威胁基础设施，揭示关键参与者(所有者、域、ip、组织、恶意软件家族等)以及这些参与者之间的关系。</p>
</li>
<li><p>对这些基础设施共享进行量化，以揭示特定攻击背后的潜在群体。</p>
</li>
<li><p>研究了网络威胁基础设施的演变，以推断网络犯罪活动的模式。</p>
</li>
</ul>
<h2 id="0x02-背景"><a href="#0x02-背景" class="headerlink" title="0x02 背景"></a>0x02 背景</h2><h3 id="提出要解决的问题"><a href="#提出要解决的问题" class="headerlink" title="提出要解决的问题"></a>提出要解决的问题</h3><ul>
<li><p>网络威胁基础设施的要素（域名/IP，域名反查到的组织/注册商等信息） 及 其相互关系是什么</p>
</li>
<li><p>网络罪犯用于实施攻击的基础设施是什么</p>
</li>
<li><p>对于注册恶意域和IP地址的联系人而言，组织和人员中最重要的参与者是谁</p>
</li>
<li><p>这些恶意软件的基础设施的发展模式</p>
</li>
</ul>
<p>基于上述的这些问题，本文提出的解决思路为：关联分析不同来源的恶意软件的基础要素，包括<strong>域名/IP，域名反查到的组织/注册商等信息</strong>。运用图论概念进行分析。</p>
<h2 id="0x03-解决方法"><a href="#0x03-解决方法" class="headerlink" title="0x03 解决方法"></a>0x03 解决方法</h2><p><strong>整体流程:</strong> (1)数据收集、(2)网络威胁图生成、(3)统计特征、(4)图概念下的评分、(5)推断基础设施的演变模式  </p>
<p><img src="9AABAAAEA2784202B916A8A8682B4915" alt="image"></p>
<h3 id="数据收集"><a href="#数据收集" class="headerlink" title="数据收集"></a>数据收集</h3><p><strong>数据来源：</strong> <a href="https://www.threattrack.com/" target="_blank" rel="noopener">https://www.threattrack.com/</a>  </p>
<p><strong>收集过程：</strong> </p>
<ul>
<li>通过沙箱获得报告</li>
<li>获得这些被访问的域名，连接的IP</li>
<li>通过VirusTotal获得恶意软件家族信息</li>
<li>使用Whois获得 域名和IP的相关信息，如：注册人，组织，物理地址等</li>
</ul>
<h3 id="生成威胁图"><a href="#生成威胁图" class="headerlink" title="生成威胁图"></a>生成威胁图</h3><h4 id="威胁图的组件"><a href="#威胁图的组件" class="headerlink" title="威胁图的组件"></a>威胁图的组件</h4><p>malware, domains, IP addresses, FTP servers, SMTP servers, IRC channels, timestamps, organizations, registrars, technical people,administrative people and domain owners</p>
<p><img src="D328671DBC5845FA8D31C78E3FD54B57" alt="image"></p>
<h4 id="生成有向图"><a href="#生成有向图" class="headerlink" title="生成有向图"></a>生成有向图</h4><p><img src="6B2906226D9F4B08951EC7593DC2058F" alt="image"><br>红色顶点代表<strong>恶意软件</strong>，黄色顶点代表<strong>IP</strong>，绿色顶点代表<strong>注册商</strong>等信息。</p>
<p>随着时间增长，这个图会超级复杂。</p>
<p><img src="2451B63CE53D4DDBAAE05D0E7E6860E4" alt="image"></p>
<p>他提出如下概念，将异构有向图分析额为同构的有向图。</p>
<p><img src="1A35DC2633EE41D28DA4BF55B9D8CA58" alt="image"></p>
<p>被恶意软件共享的域名相连接。假设有两个恶意软件 <code>v_1</code> 和 <code>v_2</code> 他们都连到了2个域名下：<code>v_d1</code> 和 <code>v_d2</code>。那么就把 <code>v_d1</code>和<code>v_d2</code>相连。<br>图分解会产生如下的几个子图：</p>
<ul>
<li>Domain-Malware graph：被恶意软件共享的域名被链接</li>
<li>Domain-IP graph： 相同IP的域名</li>
<li>IP-Malware graph： 被恶意软件连接的IP 链接起来</li>
<li>Owner-Malware graph： 被恶意软件访问到的域名的拥有者被链接</li>
<li>Owner-Physical address graph： 它们用相同的物理地址注册不同的域名的拥有者被链接</li>
<li>Organization-Malware graph： 被恶意软件访问的IP的组织</li>
</ul>
<p><img src="7477937906634254A5F038D2E2FBE37A" alt="image"></p>
<h3 id="图概念下的评分"><a href="#图概念下的评分" class="headerlink" title="图概念下的评分"></a>图概念下的评分</h3><p>本文为了评估不同参与者在网络威胁基础设施中的重要性或影响，结合一些原因，最终选择了<code>page rank</code>算法。</p>
<p>$$<br>PR(v_i) =d[\sum_{v_j\in I(v_i)}\frac{PR(v_j)}{deg_{out}(v_i)}]+(1-d)\frac{1}{|d|}<br>$$<br>其中 <code>I(v_i)</code> 是顶点集。<code>deg_{out}(v_i)</code>是顶点的外度中心。<code>d</code>是阻尼因子，（经常被假定为0.85）。<br>他会对这个式子做一些变化……求值。</p>
<h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><ol>
<li><code>page rank</code>反映了模型演化过程中的随机性。因为随着时间的变化，基础设施也是在变的。</li>
<li><code>page rank</code>是用来描述用户浏览网页的算法。而一个恶意软件访问那些基础设施（域名、IP）等，这2中情况很相似。<blockquote>
<p>This algorithm has been developed intuitively considering a user surfing the Web, starting from a web page and randomly visiting another web page through a link. If the user is on page vj with a probability d (damping factor), then the probability for this user to visit another page vi is equal to 1/deg_{out}(v_j). With a probability of 1-d, the user will stop following links and pick another random page in V.</p>
</blockquote>
</li>
</ol>
<h3 id="模式识别"><a href="#模式识别" class="headerlink" title="模式识别"></a>模式识别</h3><h4 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h4><p>本文提出的解决的问题中有一个为：判断恶意软件的基础设施的发展模式。本文在此部分研究了：网络威胁基础设施如何随时间演变。<br>通过分离生成的图中可见的模式来识别这些基础设施中可识别的规则和不规则性。<br>为了推断图形，我们计算每天收集的图形之间的相似性。</p>
<h4 id="计算关联性"><a href="#计算关联性" class="headerlink" title="计算关联性"></a>计算关联性</h4><p>为了计算图之间的关联性，它使用的方法为：<code>graph kernels</code> 。<br><code>graph kernels</code> 是使用线性方法计算图之间相似性的函数。然而，对于大型图来说，图核方法生成的向量具有高维，不容易处理。为了解决这个问题，图形核方法需要一个重要的过程称为计算图的指纹。</p>
<ul>
<li><p><strong>指纹生成</strong>的过程包括三步：1. 分解 2. 生成向量 3. 计算指纹  </p>
</li>
<li><p><strong>通过指纹计算关联性</strong>  </p>
</li>
<li><p><strong>基于时间的模式推断</strong></p>
</li>
</ul>
<p><img src="4692B69C87994280B8B5400D9C064E1D" alt="image"></p>
<p><strong>Generating Vectors</strong>  </p>
<p><img src="7E8F7CA4F7B24734ABD577F8E8BF04D6" alt="image"><br>本质：把每一个分解后的子图变成一个整数。看第三行。<br>其中的<code>α</code>是随机数，<code>P</code>是一个大质数，<code>L(v_i,v_j)</code>，返回的是共享了<code>v_i</code>和<code>v_j</code>的恶意软件数量。</p>
<blockquote>
<p>L is the labelling function that returns the number of malware shared between vi and vj</p>
</blockquote>
<p><strong>计算指纹</strong>  </p>
<p>由图子结构生成的向量对于大型图可能具有高维性。为了减小矢量的维数，我们使用指纹技术来生成易于处理的紧凑表示。<br><img src="E871D4C90EBF4955A77007829381E687" alt="image"></p>
<p>不是很了解<code>h</code>函数返回的是什么。</p>
<blockquote>
<p>Teixeira CHC, Silva A, Meira Jr W. Min-hash fingerprints for graph kernels: a trade-off among accuracy, efficiency, and compression. JIDM 2012;3(3): 227e42. <a href="https://seer.lcc.ufmg.br/index.php/jidm/article/view/199" target="_blank" rel="noopener">https://seer.lcc.ufmg.br/index.php/jidm/article/view/199</a>.</p>
</blockquote>
<p><strong>通过指纹计算关联性</strong>  </p>
<p><img src="CEEE55C2016142069F6A241B72ACA522" alt="image"></p>
<p>计算方式：指纹中相同的个数/总数</p>
<blockquote>
<p>Graph similarities are represented through a matrix, where each value is proportional to the number of values, in the min-hash vectors, that are shared between graph pairs (Fig. 6). This matrix is important for grouping graphs with proportional similarities into groups that can be good candidates to detect patterns between corresponding minhash values.</p>
</blockquote>
<p><strong>基于时间的模式推断</strong></p>
<p><img src="3B77DB1B05CA4E3991C82EE503C67555" alt="image"><br>得到的模式<br><img src="2482E5B2C8154D1580F89A420BE5F806" alt="image"></p>
<h2 id="0x04实验结果"><a href="#0x04实验结果" class="headerlink" title="0x04实验结果"></a>0x04实验结果</h2><p>实验结果分为了三部分，分别是<strong>统计特征</strong>，<strong>badness scores</strong>排序，<strong>模式推断</strong></p>
<h3 id="隐私保护"><a href="#隐私保护" class="headerlink" title="隐私保护"></a>隐私保护</h3><blockquote>
<p>For domain names, we remove some characters at the beginning or at the middle of domain names and replace them with “ <em> ”character. For IP addresses, we replace some digits with “x” character. Regarding organizations, for each country, we replace organization names with indexed codes; for example, ORG1(CHINA)-GD represents an organization which has a network located in China, Guangdong city. For owners, we replace names with initials. For physical addresses, we mask some digits and letters with “ </em> ” character.</p>
</blockquote>
<h3 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h3><p><img src="28014823EF35422587CCACACCC70C6AB" alt="image"><br>域名做了过滤，没有包含Alexa中前100W的名单</p>
<h3 id="统计特征"><a href="#统计特征" class="headerlink" title="统计特征"></a>统计特征</h3><h4 id="Domains-amp-resolving-IPs"><a href="#Domains-amp-resolving-IPs" class="headerlink" title="Domains &amp; resolving IPs"></a>Domains &amp; resolving IPs</h4><p><img src="344FF5B124FC4DDB8C0FB20ED40FCAF9" alt="image"><br>top10个经常被恶意软件访问的域名。其中有5个合法的.<br><strong>原因：</strong>恶意软件样本倾向于通过访问合法的域或将对合法域的访问重定向到虚假网页来测试连接；<br>恶意软件还连接到合法的域，下载操作系统或软件的漏洞补丁，利用漏洞进行恶意活动。</p>
<p><img src="DC8B053171684B04914E5D96925EC2EE" alt="image"><br>top-10 fast-fluxing domains(可以解析成多个IP的域名)<br><strong>分析</strong><br>大部分具有相同的二级域名 <code>nb**</code>,恶意软件广泛使用fast-flux和动态生成的域名</p>
<p><img src="9C0D24CB0DDA40E59EA0F9C79650A39C" alt="image"><br>域名被解析后分布最多的ip空间<br><strong>分析</strong><br>表中可以看出<code>184</code>和<code>216</code>两个空间是最多的：</p>
<ul>
<li><p>公共IP空间的存在暗示着网络罪犯很容易使用IP基础设施进行恶意活动，或者感染脆弱的IP空间，让他们成为僵尸网络的一部分</p>
</li>
<li><p>通过关联分析发现 解析为184.1xx.xxx.x6的域名为动态生成的域，都有于同一个二级域名 *eker.com</p>
</li>
</ul>
<p><img src="41F2876FE71A4E9594C7329F0CFB55C3" alt="image"><br>拥有这些IP的组织。</p>
<h4 id="Connected-IPs"><a href="#Connected-IPs" class="headerlink" title="Connected IPs"></a>Connected IPs</h4><p><img src="C5ACBE5F63554BDDBA2E9C551ED12AFE" alt="image"><br>top-10 恶意软件链接的IP。<br><strong>分析</strong>这些IP来自不同的IP空间经常和VPN有联系。</p>
<p><img src="544E9637EB8048459691A5DE40BD36C5" alt="image"><br>IP对应的top10的 network name。<br><strong>分析</strong> 10个中8个为亚洲的。其中9个属于组织，3个是中国的，2个韩国，2个美国。排名第一是马来西亚的。  </p>
<h4 id="Whois-information"><a href="#Whois-information" class="headerlink" title="Whois information"></a>Whois information</h4><p><img src="7FEE0079663D467487AFB56375CFAAB4" alt="image"><br>注册商与域名的对应信息。<br><strong>分析</strong>可以发现，大部分都是那种隐私保护的注册商。  </p>
<p><img src="FC230FA186ED4DB997DE228E5A1893A7" alt="image"><br>域名和物理地址的对应。<br><strong>分析</strong>排名第一的是一个巴拿马的地址，这个地址会提供一些隐私保护的服务。</p>
<h3 id="Badness-ranking"><a href="#Badness-ranking" class="headerlink" title="Badness ranking"></a>Badness ranking</h3><p><img src="66BF1C91D682418692E2FCC9C36FD405" alt="image"><br>top10-域名的badness scores。<br><strong>分析</strong>7个有 .ru，这7个中，5个有相同注册信息，关联了830个恶意软件，许多恶意软件家族都和这些域名有联系。  </p>
<p><img src="0AF5BD28AA2B4FB6B3C8A8EA9987E11F" alt="image"><br>top10-链接ip的badness scores<br><strong>分析</strong></p>
<ul>
<li>排名第一的与table6中的相同，同时2个表还有一些其他相同的IP。</li>
<li>其中存在一个组播IP，<code>239.255.255.250</code>,windows服务中存在一个漏洞，可以让这些恶意软件通过SSDP协议作为感染载体。  </li>
</ul>
<p><img src="7CB3C871A0274D1C90AFB094BF221FBD" alt="image"><br><img src="4C3BA64CF95E486DA35068C70DD99452" alt="image">  </p>
<p>前5个领域和连接ip的坏分数的演变,域名具有<strong>周期性</strong>,IP更分散。  </p>
<p><img src="3DAF915B78454AE48912735D70BE32C7" alt="image"><br>圈越大，分越高。</p>
<h3 id="Patterns-inference"><a href="#Patterns-inference" class="headerlink" title="Patterns inference"></a>Patterns inference</h3><p><img src="264D0325522546C2BB191FEA17BE87AC" alt="image"><br><img src="084BFE2DA82347088ECE68CB827084CA" alt="image"><br><strong>分析</strong><br>通过这两个图可以发现，域名的相似性更具有周期性。<br>而IP的周期性很短，1-60天。 </p>
<p><img src="EA97139931A64B5790D5747B2CE14743" alt="image"><br>域名的模式：2个字母+2个数字。<br><strong>分析</strong>这些域名下存在大量的恶意软件，并且这些域名的拥有着都有隐私保护，美国一些有这种服务的域名公司很可疑。<br><img src="6698CEAEB9F84B8DA6F28C5F9D960A56" alt="image"><br>恶意软件连接IP的模式。<br><strong>分析</strong>这些IP5个属于中国。中国有一个IP模式集群，协作恶意软件活动。  </p>
<h2 id="0x05总结与贡献"><a href="#0x05总结与贡献" class="headerlink" title="0x05总结与贡献"></a>0x05总结与贡献</h2><ol>
<li>定义了网络威胁基础设施的不同元素及其关系，提出了研究这些关系的方法。</li>
<li>确定了这些元素中的重要参与者。</li>
<li>找到了不同恶意软件共享的基础设施。</li>
<li>找到了基础设施的演变模式。</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2018/10/28/Metadata/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/28/Metadata/" class="post-title-link" itemprop="url">Identifying People by Metadata</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-10-28 10:55:15" itemprop="dateCreated datePublished" datetime="2018-10-28T10:55:15+08:00">2018-10-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-04 18:40:43" itemprop="dateModified" datetime="2019-02-04T18:40:43+08:00">2019-02-04</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/papers/" itemprop="url" rel="index"><span itemprop="name">papers</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2018/10/28/Metadata/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/10/28/Metadata/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Identifying People by Metadata</p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2018/10/28/Metadata/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2018/10/28/nginx-flask/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/28/nginx-flask/" class="post-title-link" itemprop="url">nginx-flask</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-10-28 10:48:58" itemprop="dateCreated datePublished" datetime="2018-10-28T10:48:58+08:00">2018-10-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 19:52:17" itemprop="dateModified" datetime="2019-02-02T19:52:17+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/web/nginx/" itemprop="url" rel="index"><span itemprop="name">nginx</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2018/10/28/nginx-flask/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/10/28/nginx-flask/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一些思考"><a href="#一些思考" class="headerlink" title="一些思考"></a>一些思考</h1><h2 id="什么时候会用到compose"><a href="#什么时候会用到compose" class="headerlink" title="什么时候会用到compose"></a>什么时候会用到compose</h2><p>我有了这样的一个想法：我想创建两个镜像，一个安装<code>nginx</code>，另一个安装<code>python(flask)</code>,然后使用这2个容器做<code>web</code>服务，但是我发现我不会写。所以我去查阅compose的各种资料。我发现常常遇到的例子都是，一个web服务器配上一个数据库的服务器。如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3&quot;</span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">   db:</span><br><span class="line">     image: mysql:5.7</span><br><span class="line">     volumes:</span><br><span class="line">       - db_data:/var/lib/mysql</span><br><span class="line">     restart: always</span><br><span class="line">     environment:</span><br><span class="line">       MYSQL_ROOT_PASSWORD: somewordpress</span><br><span class="line">       MYSQL_DATABASE: wordpress</span><br><span class="line">       MYSQL_USER: wordpress</span><br><span class="line">       MYSQL_PASSWORD: wordpress</span><br><span class="line"></span><br><span class="line">   wordpress:</span><br><span class="line">     depends_on:</span><br><span class="line">       - db</span><br><span class="line">     image: wordpress:latest</span><br><span class="line">     ports:</span><br><span class="line">       - &quot;8000:80&quot;</span><br><span class="line">     restart: always</span><br><span class="line">     environment:</span><br><span class="line">       WORDPRESS_DB_HOST: db:3306</span><br><span class="line">       WORDPRESS_DB_USER: wordpress</span><br><span class="line">       WORDPRESS_DB_PASSWORD: wordpress</span><br><span class="line">volumes:</span><br><span class="line">  db_data:</span><br></pre></td></tr></table></figure>
<hr>
<p>在wordpress的environment中，指定了数据库为：<code>db：3306</code>，这个会被解析成db容器的<code>ip:3306</code>。出现上面的原因，是因为在<code>wordpress</code>容器中使用了<code>depends_on</code>，当然也可以使用<code>link</code>方法。<br>关于<code>depends_on</code>和<code>link</code>的大概为：通过打开端口，以及一些环境变量与另一个容器进行通信。  <strong>当然</strong>，除了上面两种方法，还可以用另一种方法，在下面将介绍到。</p>
<hr>
<p>所以，<code>nginx</code>与<code>flask</code>之间的结合，到底适不适合使用<code>docker-compose</code>通信。然而，我并没有找到这个问题的答案，那就先看看它到底能不能使用<code>docker-compose</code>通信吧。</p>
<h1 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h1><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>拖一个<code>python</code>的镜像，在<code>python</code>中安装相应的包：<code>flask</code>,<code>uwsgi</code>。然后配置好这些东西，通过<code>uwsgi</code>开启<code>flask</code>，监听端口<code>0.0.0.0:5000</code>。  </li>
<li>拖一个<code>nginx</code>的镜像，修改配置文件<code>nginx.conf</code>。在这里，最主要的地方就是如何在<code>proxy_pass</code>中，填入正确的 <code>flask</code>容器的<code>ip</code>。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#nginx.conf</span><br><span class="line">http &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80; </span><br><span class="line">        server_name 0.0.0.0; </span><br><span class="line">        location / &#123; </span><br><span class="line">            proxy_pass http://172.17.0.2:5000;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">events &#123;</span><br><span class="line">  worker_connections  1024;  ## Default: 1024</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>为了解决上面<strong>2</strong>中的问题，当然可以先启动<code>flask</code>的容器，然后通过命令获得次容器的<code>ip</code>。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker inspect &lt;id&gt; | grep IPAddre</span><br><span class="line"></span><br><span class="line">docker inspect --format <span class="string">'&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;'</span> &lt;container-ID&gt; </span><br><span class="line"><span class="comment"># 查看所有容器ip</span></span><br><span class="line">docker inspect --format=<span class="string">'&#123;&#123;.NetworkSettings.IPAddress&#125;&#125;'</span> $(docker ps -a -q)</span><br></pre></td></tr></table></figure></p>
<p>获得上面的<code>ip</code>后，可以通过手工添加到上面的配置文件中。<br><strong>但是</strong>docker一个最大的优点就是自动化部署，如果通过这种方法，就显得太<strong>蠢</strong>了。</p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p><strong>通过 docker-compose实现</strong></p>
<h4 id="工程目录"><a href="#工程目录" class="headerlink" title="工程目录"></a>工程目录</h4><p><img src="964E3656ED274796B159A979276AF1C2" alt="image"></p>
<h4 id="flask搭建"><a href="#flask搭建" class="headerlink" title="flask搭建"></a>flask搭建</h4><p><strong>Dockerfile</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FROM python:3</span><br><span class="line">RUN pip install uwsgi &amp;&amp;\</span><br><span class="line">    pip install flask &amp;&amp;\</span><br><span class="line">    mkdir /data</span><br><span class="line"></span><br><span class="line">EXPOSE 5000</span><br><span class="line">COPY ./app.py /data</span><br><span class="line">COPY ./uwsgi.ini /data</span><br><span class="line">WORKDIR /data</span><br><span class="line">CMD [&quot;uwsgi&quot;,&quot;uwsgi.ini&quot;]</span><br></pre></td></tr></table></figure></p>
<p><strong>app.py</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"&lt;span style='color:red'&gt;Hello World !&lt;/span&gt;"</span></span><br></pre></td></tr></table></figure></p>
<p><strong>uwsgi.ini</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#uwsgi.ini</span><br><span class="line">[uwsgi]</span><br><span class="line">socket = 0.0.0.0:5000</span><br><span class="line">#protocol = http</span><br><span class="line">chdir = /data/</span><br><span class="line">wsgi-file = /data/app.py</span><br><span class="line">callable = app</span><br><span class="line">processes = 4</span><br><span class="line">threads = 2</span><br></pre></td></tr></table></figure></p>
<h4 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h4><p><strong>nginx.conf</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80; </span><br><span class="line">        server_name 0.0.0.0; </span><br><span class="line">        location / &#123; </span><br><span class="line">            proxy_pass http://$&#123;TEST_PATH&#125;:5000;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">events &#123;</span><br><span class="line">  worker_connections  1024;  ## Default: 1024</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>为了解决刚才提到的问题，可以看到，这里写的是 <strong><code>http://${TEST_PATH}:5000</code></strong>,其中的<code>${TEST_PATH}</code>是系统的环境变量。那么问题就是，如何取到这个环境变量了。下面将介绍。</p>
<h4 id="docker-compose-xml"><a href="#docker-compose-xml" class="headerlink" title="docker-compose.xml"></a>docker-compose.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3&quot;</span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">   flask:</span><br><span class="line">     build: ./flask/</span><br><span class="line">     restart: always</span><br><span class="line">     container_name: flask</span><br><span class="line">     </span><br><span class="line">   nginx:</span><br><span class="line">    image: nginx</span><br><span class="line">    # 或者</span><br><span class="line">    # link: flask</span><br><span class="line">    depends_on: flask</span><br><span class="line">    environment:</span><br><span class="line">        TEST_PATH : flask</span><br><span class="line">    container_name: nginx</span><br><span class="line">    ports:</span><br><span class="line">        - 80:80</span><br><span class="line">    volumes:</span><br><span class="line">        - /root/t/nginx/nginx.conf:/1.conf</span><br><span class="line">    command: /bin/bash -c &quot;envsubst &lt; /1.conf &gt; /etc/nginx/nginx.conf &amp;&amp; nginx -g &apos;daemon off;&apos;&quot;</span><br></pre></td></tr></table></figure>
<p>或者：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3&quot;</span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">   flask:</span><br><span class="line">     build: ./flask/</span><br><span class="line">     restart: always</span><br><span class="line">     container_name: flask</span><br><span class="line">     networks:</span><br><span class="line">        - code-network</span><br><span class="line">     </span><br><span class="line">   nginx:</span><br><span class="line">    image: nginx</span><br><span class="line">    environment:</span><br><span class="line">        TEST_PATH : flask</span><br><span class="line">    container_name: nginx</span><br><span class="line">    ports:</span><br><span class="line">        - 80:80</span><br><span class="line">    volumes:</span><br><span class="line">        - /root/t/nginx/nginx.conf:/1.conf</span><br><span class="line">    networks:</span><br><span class="line">        - code-network</span><br><span class="line">        </span><br><span class="line">    command: /bin/bash -c &quot;envsubst &lt; /1.conf &gt; /etc/nginx/nginx.conf &amp;&amp; nginx -g &apos;daemon off;&apos;&quot;</span><br><span class="line">    </span><br><span class="line">networks:</span><br><span class="line">    code-network:</span><br><span class="line">        driver: bridge</span><br></pre></td></tr></table></figure></p>
<p>首先是<code>nginx</code>模块下的<code>depends_on</code>或<code>link</code>。<br>两者的作用都是可以将不同的容器加入到同一个网络,这样，就可以将<code>docker-compose.xml</code>文件中的<code>flask</code>识别为容器的ip  </p>
<p><strong>link</strong><br>在谋篇blog中看到了这样的描述：</p>
<blockquote>
<p>其实就是在容器中的/etc/hosts添加容器id和别名的映射</p>
</blockquote>
<p>但是在官网看到了这句话：</p>
<blockquote>
<p>One feature that user-defined networks do not support that you can do with –link is sharing environmental variables between containers. However, you can use other mechanisms such as volumes to share environment variables between containers in a more controlled way.</p>
</blockquote>
<p>所以<code>link</code>似乎还可共享变量。<br><strong>但是：</strong></p>
<blockquote>
<p>links provide a legacy interface to connect Docker containers running on the same host to each other without exposing the hosts’ network ports. Use the Docker networks feature instead</p>
</blockquote>
<p><strong>depends_on</strong><br>基本大部分的资料都是说解决<strong>依赖关系</strong>。但是我很好奇,当我在<code>docker-compose.xml</code>文件，没有加入<code>depends_on</code>时，<code>environment</code>中的<code>TEST_PATH</code>没有取到<code>flask</code>这个值。（这个值需要用到<code>network</code>来解决。）<br>所以我不知道，我这次的失败是因为启动顺序导致的，还是没有再同一个网络导致的，如果是由于同一个网络导致，那么<code>depends_on</code>看来也可起到与<code>link</code>相似的功能。<br><strong>总之</strong><br>少用<code>link</code>，多用<code>depends_on</code>与<code>net_work</code>。<br><strong>command</strong><br>解决上面网络问题后，就是<code>commond</code>的问题了。最一开始的问题是，如何再<code>nginx</code>的配置文件中，获得环境变量。<br><code>command: /bin/bash -c &quot;envsubst &lt; /1.conf &gt; /etc/nginx/nginx.conf &amp;&amp; nginx -g &#39;daemon off;&#39;&quot;</code><br>后面的<code>nginx -g &#39;daemon off&#39;</code>是开启<code>nginx</code>服务。那么前面呢？  </p>
<p><img src="8B97F365B8A04583918E8A4278EC59CE" alt="image"><br>存在环境变量 <code>${TERM}</code> 为 <code>xterm</code>，有文件 1.txt 中内容是 <code>${TERM}</code><br><img src="0114282659D54DB1BC818C31F5A28A58" alt="image"><br>所以<code>envsubst &lt; /1.conf &gt; /etc/nginx/nginx.conf</code>的意思是，将 <code>/1.conf</code>中的环境变量替换，然后输入到 <code>/etc/nginx/nginx.conf</code>中。<br>如果需要指定特定的要替换的变量，可以用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">envsubst &apos;$NGINX_HOST $NGINX_PORT $HOST_IP&apos; &lt; /1.conf &gt; /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2018/10/28/docker/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/28/docker/" class="post-title-link" itemprop="url">docker</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-10-28 10:46:48" itemprop="dateCreated datePublished" datetime="2018-10-28T10:46:48+08:00">2018-10-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 19:52:17" itemprop="dateModified" datetime="2019-02-02T19:52:17+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/web/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2018/10/28/docker/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/10/28/docker/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="0x00-安装"><a href="#0x00-安装" class="headerlink" title="0x00 安装"></a>0x00 安装</h1><p><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-docker-ce" target="_blank" rel="noopener">官网</a></p>
<h1 id="0x01-基本命令"><a href="#0x01-基本命令" class="headerlink" title="0x01 基本命令"></a>0x01 基本命令</h1><h2 id="image"><a href="#image" class="headerlink" title="image"></a>image</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取</span></span><br><span class="line">docker image pull hello-world</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行image ， 产生 container</span></span><br><span class="line">docker container run hello-world</span><br></pre></td></tr></table></figure>
<h2 id="container"><a href="#container" class="headerlink" title="container"></a>container</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 列出本机正在运行的容器</span></span><br><span class="line">docker container ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出本机所有容器，包括终止运行的容器</span></span><br><span class="line">docker container ls --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 杀死某个 container</span></span><br><span class="line">docker container <span class="built_in">kill</span> [containID]</span><br></pre></td></tr></table></figure>
<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><p>这里给出一个flask的小例子。</p>
<h3 id="项目目录"><a href="#项目目录" class="headerlink" title="项目目录"></a>项目目录</h3><p><img src="413BC09A31334384851E03F517CDF8BB" alt="image"></p>
<h3 id="app-py"><a href="#app-py" class="headerlink" title="app.py"></a>app.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello DockerFile!'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(host=<span class="string">'0.0.0.0'</span>, port=<span class="number">5000</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Dockerfile-1"><a href="#Dockerfile-1" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">FROM python:3</span><br><span class="line"></span><br><span class="line">#安装flask</span><br><span class="line">RUN [&quot;pip&quot;,&quot;install&quot;,&quot;flask&quot;]</span><br><span class="line">#创建文件夹</span><br><span class="line">RUN mkdir -p  /flask/project</span><br><span class="line">#复制文件到相应目录</span><br><span class="line">COPY app.py /flask/project/</span><br><span class="line">#切换目录到/flask/project</span><br><span class="line">WORKDIR /flask/project</span><br><span class="line">#暴露端口,允许外部链接</span><br><span class="line">EXPOSE 5000</span><br><span class="line">#容器启动时 执行的命令 运行flask程序</span><br><span class="line">CMD [&quot;python&quot;,&quot;app.py&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="创建镜像与启动"><a href="#创建镜像与启动" class="headerlink" title="创建镜像与启动"></a>创建镜像与启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#首先把app.py Dockerfile文件一起放到一个文件夹下面 然后运行</span></span><br><span class="line"><span class="comment">#flask 是镜像的名字</span></span><br><span class="line"><span class="comment">#注意末尾的 .</span></span><br><span class="line">docker build -t flask .  </span><br><span class="line"></span><br><span class="line"><span class="comment">#这条命令运行flask镜像 并把flask镜像中的5000端口和宿主机中的6000端口作映射</span></span><br><span class="line">docker run -p 6000:5000 flask</span><br><span class="line"></span><br><span class="line"><span class="comment">#后台启动容器</span></span><br><span class="line">docker run -d -p 6000:5000 flask</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看容器中的标准输出</span></span><br><span class="line">docker logs [ID]</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看正在运行的容器</span></span><br><span class="line">docker ps </span><br><span class="line"></span><br><span class="line"><span class="comment">#杀死某个正在运行</span></span><br><span class="line">docker <span class="built_in">kill</span> [ID]</span><br><span class="line"></span><br><span class="line"><span class="comment">#进入docker的终端</span></span><br><span class="line"><span class="comment"># -i 允许你对容器内的标准输入 (STDIN) 进行交互</span></span><br><span class="line"><span class="comment"># -t （个人实验是用于交互）</span></span><br><span class="line">docker run -i -t [image] /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># docker container exec命令用于进入一个正在运行的 docker 容器。如果docker run命令运行容器的时候，没有使用-it参数，就要用这个命令进入容器。一旦进入了容器，就可以在容器的 Shell 执行命令了。</span></span><br><span class="line">docker container <span class="built_in">exec</span> -it [containerID] /bin/bash</span><br></pre></td></tr></table></figure>
<h2 id="某些变量"><a href="#某些变量" class="headerlink" title="某些变量"></a>某些变量</h2><h3 id="Volumn"><a href="#Volumn" class="headerlink" title="Volumn"></a>Volumn</h3><blockquote>
<p>想要了解Docker Volume，首先我们需要知道Docker的文件系统是如何工作的。<br>Docker镜像是由多个文件系统（只读层）叠加而成。当我们启动一个容器的时候，Docker会加载只读镜像层并在其上（译者注：镜像栈顶部）添加一个读写层。如果运行中的容器修改了现有的一个已经存在的文件，那该文件将会从读写层下面的只读层复制到读写层，该文件的只读版本仍然存在，只是已经被读写层中该文件的副本所隐藏。当删除Docker容器，并通过该镜像重新启动时，之前的更改将会丢失。在Docker中，只读层及在顶部的读写层的组合被称为Union File System（联合文件系统）。</p>
<p>为了能够保存（持久化）数据以及共享容器间的数据，Docker提出了Volume的概念。简单来说，Volume就是目录或者文件，它可以绕过默认的联合文件系统，而以正常的文件或者目录的形式存在于宿主机上。</p>
</blockquote>
<p>大概总结一下上面的内容，就是可以实现：<strong>存储数据</strong>和<strong>共享数据</strong>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将宿主机当前目录的db目录 与 镜像中的 /data/db 做挂载</span></span><br><span class="line">docker run -p 27017:27017 -v <span class="variable">$PWD</span>/db:/data/db -d mongo:3.2</span><br></pre></td></tr></table></figure>
<p>通过 VOLUME 指令创建的挂载点，无法指定主机上对应的目录，是自动生成的.语法为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu</span><br><span class="line">VOLUME [&quot;/data1&quot;,&quot;/data2&quot;]</span><br></pre></td></tr></table></figure></p>
<h2 id="保存修改的容器"><a href="#保存修改的容器" class="headerlink" title="保存修改的容器"></a>保存修改的容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit 614122c0aabb aoct/apache2</span><br></pre></td></tr></table></figure>
<h1 id="0x02-注意"><a href="#0x02-注意" class="headerlink" title="0x02 注意"></a>0x02 注意</h1><p>今天遇到遇到了一个有趣的事情，我在构建一个镜像的时候，Dockerfile如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu</span><br><span class="line">RUN apt-get update</span><br><span class="line"></span><br><span class="line">RUN apt-get install  python3</span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure></p>
<p>此时会报错退出，个人分析是因为在安装python3的过程中，需要用户的输入，导致docker中断。所以需要改成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu</span><br><span class="line">RUN apt-get update</span><br><span class="line"></span><br><span class="line">RUN apt-get install -y python3</span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure></p>
<p><code>-y</code>表示同意各种要求。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://17307.github.io/2018/10/28/uwsgi/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="o1hy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="o1hy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/28/uwsgi/" class="post-title-link" itemprop="url">uwsgi</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-10-28 10:45:33" itemprop="dateCreated datePublished" datetime="2018-10-28T10:45:33+08:00">2018-10-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 19:52:17" itemprop="dateModified" datetime="2019-02-02T19:52:17+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2018/10/28/uwsgi/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/10/28/uwsgi/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="镇楼"><a href="#镇楼" class="headerlink" title="镇楼"></a>镇楼</h1><p><a href="https://uwsgi-docs-zh.readthedocs.io/zh_CN/latest/index.html" target="_blank" rel="noopener">https://uwsgi-docs-zh.readthedocs.io/zh_CN/latest/index.html</a></p>
<h1 id="个人理解"><a href="#个人理解" class="headerlink" title="个人理解"></a>个人理解</h1><p>uwsgi是类似<strong>nginx</strong>或者<strong>apache</strong>这类容器与python交互的东西。</p>
<blockquote>
<p>WSGI 是一个 Python 协议，定义了应用程序（我们写的软件）如何与 Web 服务器（如 Nginx）通信，WSGI 只是一个接口</p>
<p>WSGI是一种通信协议。<br>uwsgi同WSGI一样是一种通信协议。<br>而uWSGI是实现了uwsgi和WSGI两种协议的Web服务器。</p>
</blockquote>
<p>从某种角度来看，uwsgi是一种<strong>没有</strong>nginx优秀的容器。(不知道说法是否准确)</p>
<p><a href="https://lufficc.com/blog/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-ubuntu" target="_blank" rel="noopener">https://lufficc.com/blog/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-ubuntu</a></p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install uwsgi</span><br></pre></td></tr></table></figure>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>现在将实现一个简单的小例子，顺便进行发散式的扩充，因为正在学习docker，所以在docker的环境下进行。</p>
<h2 id="docker环境"><a href="#docker环境" class="headerlink" title="docker环境"></a>docker环境</h2><p><strong>Dockerfile</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM python:3</span><br><span class="line">RUN pip install uwsgi \</span><br><span class="line">    &amp;&amp; pip install flask</span><br><span class="line">    </span><br><span class="line">EXPOSE 5000</span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure></p>
<p>**在 $PWD/python 下创建一个简单的 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">```python</span><br><span class="line">from flask import Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">@app.route(&apos;/&apos;)</span><br><span class="line">def index():</span><br><span class="line">    return &quot;&lt;span style=&apos;color:red&apos;&gt;Hello World !&lt;/span&gt;&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong>启动docker</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 5000:5000 -v <span class="variable">$PWD</span>/python:/data -it uwsgi</span><br></pre></td></tr></table></figure></p>
<p><strong>通过uwsgi启动flask</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uwsgi --http 0.0.0.0:5000 -w app:app</span><br><span class="line"># 或者</span><br><span class="line">uwsgi --socket 0.0.0.0:5000 --protocol=http -w app:app</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p><code>-w app:app</code> 等价于 <code>--wsgi-file app.py --callable app</code><br>指定 <strong>哪个文件下</strong>的<strong>哪个变量</strong>用来执行。</p>
</li>
<li><p><code>--http</code> 原本情况下，uwsgi是处理WSGI协议，所以需要指定   是<code>http</code>来处理。<br>如果是用<code>--socket</code>情况下，是建立起一个通信的socket，可以用来和<code>nginx</code>通信。此时，通过<code>protocol</code>来指定<code>http</code>协议。</p>
</li>
</ul>
<p><a href="https://uwsgi-docs-zh.readthedocs.io/zh_CN/latest/HTTP.html" target="_blank" rel="noopener">https://uwsgi-docs-zh.readthedocs.io/zh_CN/latest/HTTP.html</a></p>
<blockquote>
<p>http-socket <bind> 选项将会让uWSGI和原生HTTP通信。如果你的web服务器不支持 uwsgi protocol ，但是可以与上游HTTP代理通信，或者如果你正在用诸如Webfaction或者Heroku这样的服务来托管你的应用，那么你可以使用 http-socket 。如果你计划只通过uWSGI开放你的应用，那么用 http 选项来代替，因为路由器/代理/负载均衡器将会保护你。</bind></p>
</blockquote>
<p><strong>与nginx的通信</strong>  </p>
<p>有两种方式：</p>
<ul>
<li>用 <strong>ip+端口</strong> 方式来指定   socket，<strong>ip</strong>可能有问题，这里还不了解<br><code>--socket 0.0.0.0:5000</code></li>
<li>用 <strong>文件方式</strong> 指定socket<br><code>socket = /home/yy/code/project/py/n.sock</code>  </li>
</ul>
<p>此时需要nginx中使用不同的方法来配置对应socket。</p>
<p><img src="BD5E7E9AEDB04E409724C6AC1DCB237F" alt="image"></p>
<p>下图中的 <strong>ip</strong>可能有问题，这里还不了解。<br><img src="2794D18CD5E34ACE842DAA0C535AD7B3" alt="image"></p>
<h2 id="例子2"><a href="#例子2" class="headerlink" title="例子2"></a>例子2</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FROM python:3</span><br><span class="line">RUN pip install uwsgi &amp;&amp;\</span><br><span class="line">    pip install flask &amp;&amp;\</span><br><span class="line">    mkdir /data</span><br><span class="line"></span><br><span class="line">EXPOSE 5000</span><br><span class="line">COPY ./app.py /data</span><br><span class="line">WORKDIR /data</span><br><span class="line">CMD [&quot;uwsgi&quot;,&quot;--http&quot;,&quot;0.0.0.0:5000&quot;,&quot;-w&quot;,&quot;app:app&quot;]</span><br></pre></td></tr></table></figure>
<h2 id="例子3"><a href="#例子3" class="headerlink" title="例子3"></a>例子3</h2><p>这个例子用于介绍 <strong>uwsgi的配置文件</strong> 如何写<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="attr">http</span> = <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">5000</span></span><br><span class="line"><span class="comment"># 指定运行的文件的位置</span></span><br><span class="line"><span class="attr">chdir</span> = /data/</span><br><span class="line"><span class="attr">wsgi-file</span> = /data/app.py</span><br><span class="line"><span class="comment"># 指定变量</span></span><br><span class="line"><span class="attr">callable</span> = app</span><br><span class="line"><span class="attr">processes</span> = <span class="number">4</span></span><br><span class="line"><span class="attr">threads</span> = <span class="number">2</span></span><br></pre></td></tr></table></figure></p>
<p>当然也可如此<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="attr">socket</span> = <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">5000</span></span><br><span class="line"><span class="attr">protocol</span> = http</span><br><span class="line"><span class="attr">chdir</span> = /data/</span><br><span class="line"><span class="attr">wsgi-file</span> = /data/app.py</span><br><span class="line"><span class="attr">callable</span> = app</span><br><span class="line"><span class="attr">processes</span> = <span class="number">4</span></span><br><span class="line"><span class="attr">threads</span> = <span class="number">2</span></span><br></pre></td></tr></table></figure></p>
<p><strong>执行命令</strong>：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uwsgi uwsgi.ini</span><br></pre></td></tr></table></figure></p>
<p><strong>所以新的Dockerfile为</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FROM python:3</span><br><span class="line">RUN pip install uwsgi &amp;&amp;\</span><br><span class="line">    pip install flask &amp;&amp;\</span><br><span class="line">    mkdir /data</span><br><span class="line"></span><br><span class="line">EXPOSE 5000</span><br><span class="line">COPY ./app.py /data</span><br><span class="line">COPY ./uwsgi.ini /data</span><br><span class="line">WORKDIR /data</span><br><span class="line">CMD [&quot;uwsgi&quot;,&quot;uwsgi.ini&quot;]</span><br></pre></td></tr></table></figure></p>
<p><strong>然后</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t uwsgi3 .</span><br></pre></td></tr></table></figure></p>
<p><strong>然后</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 5000:5000 uwsgi</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">o1hy</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">39</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">15</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/17307" title="GitHub &rarr; https://github.com/17307" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://das.scusec.org/" title="https://das.scusec.org/" rel="noopener" target="_blank">DAS</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.sec-wiki.com/index.php" title="https://www.sec-wiki.com/index.php" rel="noopener" target="_blank">secwiki</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.fefairy.com" title="http://blog.fefairy.com" rel="noopener" target="_blank">prettymask</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://herasu.github.io/" title="https://herasu.github.io/" rel="noopener" target="_blank">Fish</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">o1hy</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.0.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  

  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.0"></script>

  <script src="/js/src/motion.js?v=7.0.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=7.0.0"></script>


  
  
  
  <script id="dsq-count-scr" src="https://17307.disqus.com/count.js" async></script>







  



  
  
  
    
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.4.1/dist/instantsearch.min.css">

  
  
    
  
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.4.1/dist/instantsearch.js"></script>
  

  <script src="/js/src/algolia-search.js?v=7.0.0"></script>



  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


  

  

  

  

  

  

  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":100,"hOffset":0,"vOffset":30},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
